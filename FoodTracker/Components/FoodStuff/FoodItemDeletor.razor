@* Usings *@
@using MongoDB.Bson
@using Scripts.DataBase

@* Injects *@
@inject DBManager dbManager

<button @onclick="Delete">Delete</button>
<FoodTracker.Components.UserFeedback.MessageDisplayer messages="_lastDeleteStatus.messages" ClearStatus="ClearStatus"/>

@code {
    [Parameter] public ObjectId foodItemID { get; set; }
    [Parameter] public Action OnDeleteComplete { get; set; } = () => {};

    private (bool success, List<string> messages) _lastDeleteStatus = (false, new List<string>());    

    private void Delete()
    {
        _lastDeleteStatus = dbManager.FoodItemManager.TryDeleteItem(foodItemID);

        OnDeleteComplete();
    }

    private void ClearStatus()
    {
        _lastDeleteStatus = (false, new List<string>());
    }
}
